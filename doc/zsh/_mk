#compdef mk
_mk(){
  local context="$curcontext" state state_descr line ret=1;
  typeset -A opt_args;

  typeset -a tasks;
  tasks=($(mk --tasks | cut -f 1-1 -d ' '));

  _arguments \
    "*"{-f=,--file=}"[Load specific task files]:file:_files" \
    "--tasks[Print task list]" \
    "(-h --help)"{-h,--help}"[Display help and exit]" \
    "--version[Print the version and exit]" \
    "*:tasks:_values 'tasks' $tasks" && ret=0;
  return $ret;
}

_mk "$@"